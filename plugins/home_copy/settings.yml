name: Copie de comptes utilisateurs
description: "Copie de comptes utilisateurs vers un support externe"
version: 1.0
category: Syst√®me
multiple: true
icon: üè†
config_fields:
  home_src_dir:
    type: directory
    label: Dossier home source
    default: /home
    required: true
    not_empty: true

  user_select:
    type: checkbox_group
    label: S√©lectionner les utilisateurs √† copier
    depends_on: home_src_dir
    dynamic_options:
      script: get_users
      global: true
      function: get_users
      args:
        - field: home_src_dir
          param_name: home_dir
      value_key: username
      label_key: description
      
  user_all:
    type: checkbox
    label: Copier tous les comptes utilisateurs
    default: true
    # Sera cach√© si aucun utilisateur n'est disponible
    enabled_if:
      field: user_select
      value: has_options  # Valeur sp√©ciale qui sera v√©rifi√©e dans le code
      
  home_dst_dir:
    type: select
    label: Dossier home destination
    default: /home
    required: true
    not_empty: true
    dynamic_options:
      global: true
      script: get_usb.py
      function: get_usb
      args:
        - param_name: include_system_disk
          value: false
      value_key: device
      label_key: description

  machine_dir:
    type: checkbox
    label: Cr√©er un dossier avec le nom de machine dans la destination
    default: true